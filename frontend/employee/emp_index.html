<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Employee Dashboard</title>
    <link rel="stylesheet" href="/frontend/employee/emp_styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link href='https://fonts.googleapis.com/css?family=Inter' rel='stylesheet'>
</head>
<body>

<header>
    Employee Dashboard
    <button onclick="logout()" style="float: right; margin-top: -5px;">Logout</button>
</header>

<main class="container">

    <!-- Search & Item Grid Section -->
<!-- Replace the search input section -->
<section class="inventory-section">
    <h2>Available Stationery</h2>
    <div class="search-container">
        <input type="text" id="searchItem" placeholder="Search items by name..." 
               oninput="searchItem()">
        <span class="search-icon">üîç</span>
    </div>
    <div id="itemsContainer" class="item-grid">
        <!-- Items will load here -->
    </div>
</section>
    <!-- Request Modal -->
    <div class="request-modal" id="requestModal">
        <div class="modal-content">
            <span class="close-btn" onclick="document.getElementById('requestModal').style.display='none'">&times;</span>
            <h3>Request Item</h3>
            <form id="requestForm">
                <input type="hidden" id="selectedItemId">

                <label>Item Name</label>
                <input type="text" id="selectedItemName" readonly>

                <label for="quantity">Quantity</label>
                <input type="number" id="quantity" required>

                <label for="reason">Reason</label>
                <textarea id="reason" rows="3" required></textarea>

                <button type="submit">Submit Request</button>
            </form>
        </div>
    </div>

    <!-- My Requests Table -->
    <section class="requests-section">
        <h2>My Requests</h2>
        <button onclick="displayEmployeeRequests()" class="refresh-btn">
            üîÑ Refresh My Requests
        </button>
        
        <table>
            <thead>
                <tr>
                    <th>Item</th>
                    <th>Quantity</th>
                    <th>Status</th>
                    <th>Admin Response</th>
                </tr>
            </thead>
            <tbody id="my-requests">
                <!-- Requests will be loaded here -->
            </tbody>
        </table>
    </section>
    <!-- Add this near your requests table -->
<section class="order-history-section">
    <div id="orderHistoryContainer"></div>
</section>
<!-- Order History Section -->
 
<section class="order-history">
    <h2>My Order History</h2>
    <div class="export-controls">
        <button onclick="exportMyOrders()" class="export-btn">
            <i class="fas fa-download"></i> Export to CSV
        </button>
    </div>
    <div class="table-container">
        <table id="orderHistoryTable">
            <thead>
                <tr>
                    <th>Item</th>
                    <th>Quantity</th>
                    <th>Status</th>
                    <th>Date</th>
                </tr>
            </thead>
            <tbody>
                <!-- Filled by JavaScript -->
            </tbody>
        </table>
    </div>
</section>
<!-- Add this conditional wrapper -->
<div id="authContainer">
    <section class="order-history" id="orderHistorySection" style="display: none;">
        <h2>My Order History</h2>
        <div class="table-container">
            <table id="orderHistoryTable">
                <!-- ... existing table code ... -->
            </table>
        </div>
    </section>
</div>
</main>


<script src="/frontend/employee/emp_script.js"></script>
</body>
</html>
